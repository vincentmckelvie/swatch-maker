(()=>{"use strict";class t{constructor(t){const e=this;this.parent=t.parent,this.color="#ffffff",this.index=t.index,this.arrlen=t.length,this.spawn=t.spawn,this.holder=document.createElement("span"),this.holder.className="swatch-single-holder",null==t.after?this.parent.appendChild(this.holder):this.parent.insertBefore(this.holder,t.after),this.dom=document.createElement("input"),this.dom.setAttribute("type","color"),this.dom.className="swatch-single",this.dom.value=this.color,this.holder.appendChild(this.dom),this.hexInput=document.createElement("input"),this.hexInput.setAttribute("type","text"),this.hexInput.className="swatch-hex-single",this.hexInput.value="#ffffff",this.holder.appendChild(this.hexInput),this.x=document.createElement("div"),this.x.className="under-btn",this.holder.appendChild(this.x),this.x.innerHTML="x",this.add=document.createElement("div"),this.add.className="under-btn",this.holder.appendChild(this.add),this.add.innerHTML="+",this.left=document.createElement("div"),this.left.className="under-btn",this.holder.appendChild(this.left),this.left.innerHTML="&#8592",this.right=document.createElement("div"),this.right.className="under-btn",this.holder.appendChild(this.right),this.right.innerHTML="&#8594",this.dom.addEventListener("input",(function(t){e.color=e.dom.value,e.hexInput.value=e.color})),this.hexInput.addEventListener("input",(function(){const t=e.hexInput.value;e.color=t,e.dom.value=t})),this.x.addEventListener("click",(function(){e.removeSwatchColor()})),this.add.addEventListener("click",(function(){e.addSwatchColor()})),this.right.addEventListener("click",(function(){e.index!=e.arrlen&&e.swatchRight()})),this.left.addEventListener("click",(function(){0!=e.index&&e.swatchLeft()})),this.color=t.value,this.dom.value=this.color,this.hexInput.value=this.color}removeSwatchColor(){this.spawn.removeSwatchColor(this.index),this.holder.remove()}addSwatchColor(){this.spawn.addSwatchColor(this.index,this.holder)}swatchLeft(){console.log(this.index),this.spawn.swatchLeft(this.index,this.holder,this.holder.previousSibling)}swatchRight(){this.spawn.swatchRight(this.index,this.holder,this.holder.nextSibling.nextSibling)}swapColors(t){this.color=t,this.hexInput.color=this.color,this.dom.value=this.color}updateIndex(t,e){this.index=t,this.arrlen=e}}class e{constructor(e){this.parent=e.parent,this.amt=e.amt,this.arr=[],this.dom=document.createElement("div"),this.dom.className="swatch-holder",this.parent.appendChild(this.dom),this.ogArr=e.swatchArray;for(let e=0;e<this.ogArr.length;e++)this.arr.push(new t({parent:this.dom,value:this.ogArr[e].col,index:e,spawn:this,length:this.ogArr.length-1}))}bounce(){const t="[";for(let e=0;e<this.arr.length;e++)t+=this.arr[e].color,e<this.arr.length-1&&(t+=",");return t+="]",t}removeSwatchColor(t){this.arr.splice(t,1),this.resetIndexes()}addSwatchColor(e,s){this.arr.splice(e+1,0,new t({parent:this.dom,value:"#ffffff",index:e+1,spawn:this,length:this.arr.length-1,after:s.nextSibling})),this.resetIndexes()}swatchLeft(t,e,s){const h=this.arr[t-1].color;this.arr[t-1].swapColors(this.arr[t].color),this.arr[t].swapColors(h)}swatchRight(t,e,s){const h=this.arr[t+1].color;this.arr[t+1].swapColors(this.arr[t].color),this.arr[t].swapColors(h)}resetIndexes(){for(let t=0;t<this.arr.length;t++)this.arr[t].updateIndex(t,this.arr.length-1),console.log(this.arr[t].index+" "+this.arr[t].color)}}class s{constructor(t,s,h){const i=this;this.dom=document.createElement("div"),this.dom.className="swatch-canvas-holder",this.canvas=document.createElement("canvas"),this.canvas.className="swatch-canvas";this.swatchArray=t,this.amt=this.swatchArray.length,this.canvas.width=50*this.amt,this.canvas.height=20,this.ctx=this.canvas.getContext("2d",{alpha:!1}),this.ctx.beginPath();for(var n=0;n<this.amt;n++){const e=t[n],s=50*n;this.ctx.fillStyle=e.col,this.ctx.strokeStyle="black",this.ctx.lineWidth=1,this.ctx.fillRect(s,0,50,20),this.ctx.strokeRect(s,0,50,20)}s.appendChild(this.dom),this.number=document.createElement("span"),this.number.innerHTML=""+h,this.number.className="swatch-number",this.dom.appendChild(this.number),this.dom.appendChild(this.canvas),this.added=!1,this.canvas.addEventListener("click",(function(){i.addSwatch()})),this.swatch=new e({parent:this.dom,amt:this.amt,swatchArray:this.swatchArray}),this.swatch.dom.style.display="none"}addSwatch(){this.added||(this.canvas.style.display="none",this.swatch.dom.style.display="block",this.added=!0)}}let h=[];const i=document.getElementById("swatches");let n=0;swatches.map(((t,e)=>{const a=new s(t,i,n);h.push(a),n++}));document.getElementById("export-btn").addEventListener("click",(function(t){let e=[];for(let t=0;t<h.length;t++){let s=[];for(let e=0;e<h[t].swatch.arr.length;e++)s.push({col:h[t].swatch.arr[e].color});e.push(s)}!function(t,e,s){var h=document.createElement("a"),i=new Blob([t],{type:s});h.href=URL.createObjectURL(i),h.download=e,h.click()}(JSON.stringify(e),"colors.json","text/plain")}));function a(t){console.log(t.target.result);var e=JSON.parse(t.target.result);!function(){var t=i,e=t.lastElementChild;for(;e;)t.removeChild(e),e=t.lastElementChild}(),h=[],setTimeout((function(){for(let t=0;t<e.length;t++){const n=e[t],a=new s(n,i,t);h.push(a)}}),200)}document.getElementById("load-btn").addEventListener("change",(function(t){var e=new FileReader;e.onload=a,e.readAsText(event.target.files[0])}))})();